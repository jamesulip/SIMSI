import{a as h,Q as U}from"./QCard.017a0abe.js";import{Q as _}from"./QSeparator.490eab7d.js";import{Q}from"./QImg.db91a865.js";import{u as F,r as d,o as c,c as P,w as t,b as e,d as A,a as m,W as g,X as x,a6 as k,ab as w,f as p,e as y,g as n,I as $,at as R}from"./app.a386ffd6.js";import{Q as C}from"./QInput.243f780c.js";import{Q as I}from"./QCardActions.a599bc1c.js";import{Q as j}from"./QSpace.dcc88675.js";import{Q as z}from"./QForm.5f8d0226.js";import{_ as D}from"./InputError.9d4e6494.js";import{_ as S}from"./SecondaryButton.a9570c01.js";import"./use-dark.41be6e6f.js";import"./use-key-composition.2a98b4d9.js";import"./uid.a558ccac.js";const E=m("div",{class:"text-h6"},"Profile Information",-1),T=m("div",{class:"text-subtitle2"}," Update your account's profile information and email address. ",-1),q={key:0},L={class:"flex"},M={class:"q-gutter-md w-full"},le={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const f=u,a=F({_method:"PUT",name:f.user.name,email:f.user.email,photo:null});d(null);const i=d(null),l=d(null),V=()=>{l.value&&(a.photo=l.value.files[0]),a.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>v()})},b=()=>{l.value.click()},N=()=>{const r=l.value.files[0];if(!r)return;const o=new FileReader;o.onload=s=>{i.value=s.target.result},o.readAsDataURL(r)},B=()=>{R.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{i.value=null,v()}})},v=()=>{var r;(r=l.value)!=null&&r.value&&(l.value.value=null)};return(r,o)=>(c(),P(z,{class:"mx-auto"},{default:t(()=>[e(U,{flat:"",bordered:""},{default:t(()=>[e(h,null,{default:t(()=>[E,T]),_:1}),e(_),e(h,null,{default:t(()=>[r.$page.props.jetstream.managesProfilePhotos?(c(),A("div",q,[m("input",{ref_key:"photoInput",ref:l,type:"file",class:"hidden",onChange:N},null,544),m("div",L,[g(e(k,{size:"150px",class:"mx-auto"},{default:t(()=>[e(Q,{src:u.user.profile_photo_url,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,!i.value]]),g(e(k,{size:"150px",class:"mx-auto"},{default:t(()=>[e(Q,{src:i.value,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,i.value]])]),e(S,{class:"mt-2 mr-2",type:"button",onClick:w(b,["prevent"])},{default:t(()=>[p(" Select A New Photo ")]),_:1},8,["onClick"]),u.user.profile_photo_path?(c(),P(S,{key:0,type:"button",class:"mt-2",onClick:w(B,["prevent"])},{default:t(()=>[p(" Remove Photo ")]),_:1},8,["onClick"])):y("",!0),e(D,{message:n(a).errors.photo,class:"mt-2"},null,8,["message"])])):y("",!0)]),_:1}),e(I,null,{default:t(()=>[m("div",M,[e(C,{type:"text",modelValue:n(a).name,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).name=s),outlined:"",label:"Name"},null,8,["modelValue"]),e(C,{type:"text",modelValue:n(a).email,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).email=s),outlined:"",label:"Email"},null,8,["modelValue"])])]),_:1}),e(_),e(I,null,{default:t(()=>[e(j),e($,{unelevated:"",color:"primary",onClick:o[2]||(o[2]=s=>V()),loading:n(a).processing},{default:t(()=>[p("Save")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}};export{le as default};
