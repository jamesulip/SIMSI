import{u as F,r as m,c as h,w as t,o as c,b as e,aF as _,O as P,d as U,a as d,P as g,R as x,a9 as Q,ag as k,f,e as w,g as n,aH as y,aG as C,x as A,aE as R,aI as $}from"./app.773df418.js";import{Q as I}from"./QImg.8de32c90.js";import{Q as E}from"./QSpace.498805b6.js";import{Q as j}from"./QForm.96529add.js";import{_ as z}from"./InputError.6591c28e.js";import{_ as S}from"./SecondaryButton.cde84d28.js";const D=d("div",{class:"text-h6"},"Profile Information",-1),O=d("div",{class:"text-subtitle2"}," Update your account's profile information and email address. ",-1),T={key:0},q={class:"flex"},G={class:"q-gutter-md w-full"},X={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const p=u,o=F({_method:"PUT",name:p.user.name,email:p.user.email,photo:null});m(null);const i=m(null),l=m(null),V=()=>{l.value&&(o.photo=l.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>v()})},b=()=>{l.value.click()},N=()=>{const s=l.value.files[0];if(!s)return;const a=new FileReader;a.onload=r=>{i.value=r.target.result},a.readAsDataURL(s)},B=()=>{$.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{i.value=null,v()}})},v=()=>{var s;(s=l.value)!=null&&s.value&&(l.value.value=null)};return(s,a)=>(c(),h(j,{class:"mx-auto"},{default:t(()=>[e(R,{flat:"",bordered:""},{default:t(()=>[e(_,null,{default:t(()=>[D,O]),_:1}),e(P),e(_,null,{default:t(()=>[s.$page.props.jetstream.managesProfilePhotos?(c(),U("div",T,[d("input",{ref_key:"photoInput",ref:l,type:"file",class:"hidden",onChange:N},null,544),d("div",q,[g(e(Q,{size:"150px",class:"mx-auto"},{default:t(()=>[e(I,{src:u.user.profile_photo_url,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,!i.value]]),g(e(Q,{size:"150px",class:"mx-auto"},{default:t(()=>[e(I,{src:i.value,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,i.value]])]),e(S,{class:"mt-2 mr-2",type:"button",onClick:k(b,["prevent"])},{default:t(()=>[f(" Select A New Photo ")]),_:1},8,["onClick"]),u.user.profile_photo_path?(c(),h(S,{key:0,type:"button",class:"mt-2",onClick:k(B,["prevent"])},{default:t(()=>[f(" Remove Photo ")]),_:1},8,["onClick"])):w("",!0),e(z,{message:n(o).errors.photo,class:"mt-2"},null,8,["message"])])):w("",!0)]),_:1}),e(y,null,{default:t(()=>[d("div",G,[e(C,{type:"text",modelValue:n(o).name,"onUpdate:modelValue":a[0]||(a[0]=r=>n(o).name=r),outlined:"",label:"Name"},null,8,["modelValue"]),e(C,{type:"text",modelValue:n(o).email,"onUpdate:modelValue":a[1]||(a[1]=r=>n(o).email=r),outlined:"",label:"Email"},null,8,["modelValue"])])]),_:1}),e(P),e(y,null,{default:t(()=>[e(E),e(A,{unelevated:"",color:"primary",onClick:a[2]||(a[2]=r=>V()),loading:n(o).processing},{default:t(()=>[f("Save")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}};export{X as default};
