import{Q as h}from"./QCardSection.9b50796e.js";import{Q as _}from"./QSeparator.91960911.js";import{Q}from"./QImg.0fe3dd47.js";import{u as U,r as d,o as c,c as P,w as t,b as e,d as F,a as m,H as g,I as x,_ as k,a4 as w,f as p,e as y,g as n,v as A,aq as $}from"./app.4a522239.js";import{Q as C}from"./QInput.ab7662bb.js";import{a as I,Q as R}from"./QCardActions.ad8a9dd2.js";import{Q as j}from"./QSpace.4fab7da7.js";import{Q as q}from"./QForm.9a5af0b3.js";import{_ as z}from"./InputError.24e62e7d.js";import{_ as S}from"./SecondaryButton.9f08877f.js";import"./focus-manager.5d096218.js";import"./use-key-composition.60849670.js";import"./uid.42677368.js";const D=m("div",{class:"text-h6"},"Profile Information",-1),E=m("div",{class:"text-subtitle2"}," Update your account's profile information and email address. ",-1),T={key:0},H={class:"flex"},L={class:"q-gutter-md w-full"},le={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const f=u,a=U({_method:"PUT",name:f.user.name,email:f.user.email,photo:null});d(null);const i=d(null),l=d(null),V=()=>{l.value&&(a.photo=l.value.files[0]),a.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>v()})},b=()=>{l.value.click()},N=()=>{const r=l.value.files[0];if(!r)return;const o=new FileReader;o.onload=s=>{i.value=s.target.result},o.readAsDataURL(r)},B=()=>{$.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{i.value=null,v()}})},v=()=>{var r;(r=l.value)!=null&&r.value&&(l.value.value=null)};return(r,o)=>(c(),P(q,{class:"mx-auto"},{default:t(()=>[e(R,{flat:"",bordered:""},{default:t(()=>[e(h,null,{default:t(()=>[D,E]),_:1}),e(_),e(h,null,{default:t(()=>[r.$page.props.jetstream.managesProfilePhotos?(c(),F("div",T,[m("input",{ref_key:"photoInput",ref:l,type:"file",class:"hidden",onChange:N},null,544),m("div",H,[g(e(k,{size:"150px",class:"mx-auto"},{default:t(()=>[e(Q,{src:u.user.profile_photo_url,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,!i.value]]),g(e(k,{size:"150px",class:"mx-auto"},{default:t(()=>[e(Q,{src:i.value,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,i.value]])]),e(S,{class:"mt-2 mr-2",type:"button",onClick:w(b,["prevent"])},{default:t(()=>[p(" Select A New Photo ")]),_:1},8,["onClick"]),u.user.profile_photo_path?(c(),P(S,{key:0,type:"button",class:"mt-2",onClick:w(B,["prevent"])},{default:t(()=>[p(" Remove Photo ")]),_:1},8,["onClick"])):y("",!0),e(z,{message:n(a).errors.photo,class:"mt-2"},null,8,["message"])])):y("",!0)]),_:1}),e(I,null,{default:t(()=>[m("div",L,[e(C,{type:"text",modelValue:n(a).name,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).name=s),outlined:"",label:"Name"},null,8,["modelValue"]),e(C,{type:"text",modelValue:n(a).email,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).email=s),outlined:"",label:"Email"},null,8,["modelValue"])])]),_:1}),e(_),e(I,null,{default:t(()=>[e(j),e(A,{unelevated:"",color:"primary",onClick:o[2]||(o[2]=s=>V()),loading:n(a).processing},{default:t(()=>[p("Save")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}};export{le as default};
