import{a8 as q,r as k,o as f,c as w,w as a,b as l,a as m,aE as E,aH as C,bp as L,O as p,aF as u,aG as b,g as s,x as r,d as g,h as S,F as z,Q as y,P as D,f as Y,ag as B,aI as N}from"./app.5959f21c.js";import{Q as T,C as U}from"./ClosePopup.61ba310b.js";import{Q as j}from"./QSelect.1c720cea.js";import{Q as $,a as h}from"./QPopupProxy.74dd89b2.js";import{Q as A}from"./QFile.27510456.js";import{Q as J}from"./QImg.61f61069.js";import{Q as G}from"./QSpace.907c9ee5.js";import{Q as O}from"./QPage.7e4afda4.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang.f30be699.js";import{d as P}from"./date.3a1195c9.js";import{u as R}from"./use-quasar.f4a457d5.js";import{u as K}from"./index.8246c581.js";import"./QTooltip.1ccdcd6b.js";import"./QLayout.53d409fb.js";import"./use-fullscreen.a065ee23.js";import"./format.311d02a1.js";import"./use-cache.b0833c75.js";import"./touch.70a9dd44.js";const W=["onSubmit"],X=m("div",{class:"text-h6"},"Job Details",-1),Z={class:"p-2 bg-gray-50 grid grid-cols-1 gap-3"},_={class:"row items-center justify-end"},ee={class:"row items-center justify-end"},le=m("br",null,null,-1),oe={class:"q-col-gutter-md row items-start"},Qe=q({__name:"Edit",props:{job_types:null,job:null,employers:null},setup(o){const{job:v,job_types:te}=o,n=R(),V=k(!1);function F(){N.Inertia.post(`/admin/jobs/${v.id}/update`,{...v,date_posted:P.formatDate(v.date_posted,"YYYY-MM-DD"),date_expires:P.formatDate(v.date_expires,"YYYY-MM-DD")},{preserveScroll:!0,onStart:()=>{V.value=!0,n.notify({group:"my-group",message:"Updating job...",color:"primary",position:"bottom"})},onSuccess:()=>{V.value=!1,n.notify({group:"my-group",message:"Job updated successfully",color:"positive",position:"bottom",timeout:2e3})}})}const{data:x,isFetching:M}=K("https://restcountries.com/v3.1/all?fields=name").json(),Q=k(x.value);function I(c,t,e){t(()=>{const i=c.toLowerCase();Q.value=x.value.filter(d=>d.name.common.toLowerCase().indexOf(i)>-1)})}return(c,t)=>(f(),w(H,{title:"Jobs"},{default:a(()=>[l(O,{padding:"",class:"flex w-full"},{default:a(()=>[m("form",{class:"mx-auto",onSubmit:B(F,["prevent"])},[l(E,{flat:"",bordered:"",class:"max-w-7xl"},{default:a(()=>[l(C,{class:"flex w-full"},{default:a(()=>[X,l(L,{"true-value":1,"false-value":0,label:"Active",modelValue:o.job.active,"onUpdate:modelValue":t[0]||(t[0]=e=>o.job.active=e)},null,8,["modelValue"])]),_:1}),l(p),l(u,null,{default:a(()=>[l(b,{modelValue:o.job.title,"onUpdate:modelValue":t[1]||(t[1]=e=>o.job.title=e),label:"Title",outlined:"","lazy-rules":"",rules:[e=>!!e||"Please type something"]},null,8,["modelValue","rules"])]),_:1}),l(p),l(u,null,{default:a(()=>[l(T,{"model-value":o.job.description,"onUpdate:model-value":t[2]||(t[2]=e=>o.job.description=e),toolbar:[[{label:s(n).lang.editor.align,icon:s(n).iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:s(n).lang.editor.formatting,icon:s(n).iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:s(n).lang.editor.fontSize,icon:s(n).iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:s(n).lang.editor.defaultFont,icon:s(n).iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"},label:"Description",outlined:"","lazy-rules":"",rules:[e=>!!e||"Please type something"]},null,8,["model-value","toolbar","rules"])]),_:1}),l(p),l(u,{class:"q-gutter-sm"},{default:a(()=>[l(r,{class:"q-mr-sm",color:"primary",flat:"",label:"Qualifications",unelevated:"",icon:"add",onClick:t[3]||(t[3]=e=>o.job.skills.push(""))}),m("div",Z,[(f(!0),g(z,null,S(o.job.skills,(e,i)=>(f(),w(b,{dense:"",type:"textarea",outlined:"",rows:"2",key:`phone-${i}`,"model-value":o.job.skills[i],"onUpdate:model-value":d=>o.job.skills[i]=d,label:"Qualifications",rules:[d=>!!d||"Please type something",d=>d.length>2||"Please type something"]},{append:a(()=>[l(r,{unelevated:"",class:"q-mr-sm",color:"red",icon:"delete",flat:"",onClick:d=>o.job.skills.splice(i,1)},null,8,["onClick"])]),_:2},1032,["model-value","onUpdate:model-value","rules"]))),128))])]),_:1}),l(p),l(u,{class:"q-gutter-md"},{default:a(()=>[l(j,{modelValue:o.job.employer_id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.job.employer_id=e),outlined:"",label:"Employer",options:o.employers,"map-options":"","emit-value":"","option-value":e=>e.id,"option-label":e=>e.name},null,8,["modelValue","options","option-value","option-label"]),l(j,{"use-input":"",options:Q.value,onFilter:I,modelValue:o.job.location,"onUpdate:modelValue":t[5]||(t[5]=e=>o.job.location=e),outlined:"",label:"Location",loading:s(M),"option-label":e=>{var i;return(i=e==null?void 0:e.name)==null?void 0:i.common},"map-options":"","emit-value":"","option-value":e=>{var i;return(i=e==null?void 0:e.name)==null?void 0:i.common}},null,8,["options","modelValue","loading","option-label","option-value"])]),_:1}),l(u,{class:"flex gap-3"},{default:a(()=>[l(b,{prefix:"Php",modelValue:o.job.salary,"onUpdate:modelValue":t[6]||(t[6]=e=>o.job.salary=e),label:"Salary",type:"number",class:"w-1/2",outlined:"",hint:"You can leave this field empty if you don't want to show salary","lazy-rules":""},null,8,["modelValue"])]),_:1}),l(u,{class:"flex gap-3"},{default:a(()=>[l(j,{class:"flex-1",clearable:"",modelValue:o.job.job_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>o.job.job_type_id=e),"emit-value":"","map-options":"",label:"Employment  Type",outlined:"",options:o.job_types,"lazy-rules":"","option-value":"id","option-label":"name"},null,8,["modelValue","options"])]),_:1}),l(u,{class:"flex gap-3"},{default:a(()=>[l(b,{class:"flex-1",modelValue:o.job.date_posted,"onUpdate:modelValue":t[9]||(t[9]=e=>o.job.date_posted=e),label:"Date Posted",outlined:"","lazy-rules":""},{append:a(()=>[l(y,{name:"event",class:"cursor-pointer"},{default:a(()=>[l($,{"transition-show":"scale","transition-hide":"scale"},{default:a(()=>[l(h,{mask:"YYYY-MM-DD",modelValue:o.job.date_posted,"onUpdate:modelValue":t[8]||(t[8]=e=>o.job.date_posted=e)},{default:a(()=>[m("div",_,[D(l(r,{label:"Close",color:"primary",flat:""},null,512),[[U]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(b,{class:"flex-1",modelValue:o.job.date_expires,"onUpdate:modelValue":t[11]||(t[11]=e=>o.job.date_expires=e),label:"Date Expires",outlined:"","lazy-rules":""},{append:a(()=>[l(y,{name:"event",class:"cursor-pointer"},{default:a(()=>[l($,{"transition-show":"scale","transition-hide":"scale"},{default:a(()=>[l(h,{modelValue:o.job.date_expires,"onUpdate:modelValue":t[10]||(t[10]=e=>o.job.date_expires=e),mask:"YYYY-MM-DD"},{default:a(()=>[m("div",ee,[D(l(r,{label:"Close",color:"primary",flat:""},null,512),[[U]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[l(A,{outlined:"",modelValue:o.job.images,"onUpdate:modelValue":t[12]||(t[12]=e=>o.job.images=e),multiple:""},{prepend:a(()=>[l(y,{name:"attach_file"})]),_:1},8,["modelValue"]),le,m("div",oe,[(f(!0),g(z,null,S(o.job.media,e=>(f(),g("div",{class:"col-3",key:e.id},[l(J,{src:e.original_url,"no-native-menu":""},{default:a(()=>[l(r,{class:"absolute all-pointer-events",icon:"close",flat:"",color:"red",style:{top:"8px",left:"8px"},onClick:i=>c.$inertia.delete(`/admin/jobs/${o.job.id}/media/${e.id}`)},null,8,["onClick"])]),_:2},1032,["src"])]))),128))])]),_:1}),l(p),l(C,{align:"right"},{default:a(()=>[l(r,{unelevated:"",size:"sm",onClick:t[13]||(t[13]=e=>c.$inertia.get("/admin/jobs")),color:"negative"},{default:a(()=>[Y(" Cancel ")]),_:1}),l(r,{unelevated:"",size:"sm",icon:"delete",onClick:t[14]||(t[14]=e=>c.$inertia.delete(`/admin/jobs/${o.job.id}`)),color:"negative"},{default:a(()=>[Y(" Delete ")]),_:1}),l(G),l(r,{unelevated:"",label:"Save",type:"submit",color:"primary",size:"sm",icon:"mdi-content-save-outline"})]),_:1})]),_:1})],40,W)]),_:1})]),_:1}))}});export{Qe as default};
