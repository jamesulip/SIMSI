import{M as zt,i as xe,r as j,j as m,v as J,y as $e,A as Ge,s as Je,k as s,T as ge,z as _e,l as je,G as ut,K as Et,au as st,p as Xe,I,Q as Lt,x as $t,q as Be,av as Bt,aj as jt,Y as Nt,m as Ft}from"./app.6a27b261.js";import{u as ct,v as Ze,a as Rt,b as At,c as dt,r as et,s as It,p as tt,d as Yt,Q as at,e as Qt,f as Ut,g as Kt}from"./AppLayout.vue_vue_type_script_setup_true_lang.e38fe0e1.js";import{u as Wt,a as Vt,b as Gt,c as Jt,d as Xt,e as Zt,f as ea,h as ta,k as aa,t as na,v as oa}from"./use-prevent-scroll.d8327787.js";import{c as nt}from"./touch.07d8f338.js";import{u as ft,a as vt}from"./use-dark.1360d7bf.js";import{u as la,a as ra,b as ia}from"./use-fullscreen.7e337221.js";import{e as ua}from"./use-key-composition.d3512047.js";import{a as sa,b as ca,f as da,c as fa}from"./uid.af08f49d.js";import{u as va}from"./use-cache.b0833c75.js";import{t as ha,a as ot,f as ma,g as ga,j as Me,_ as ya}from"./date.703c7391.js";import{p as fe}from"./format.2bc25e5f.js";import{Q as pa}from"./QDialog.81960fdd.js";function ht(e,n){if(n&&e===n)return null;const o=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return e;const u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d=u.display;return d==="block"||d==="table"?e:ht(e.parentNode)}function ze(e,n,o){return!e||e===document.body?!1:o===!0&&e===n||(n===document?document.body:n).contains(e.parentNode)}function mt(e,n,o){if(o||(o=document.createRange(),o.selectNode(e),o.setStart(e,0)),n.count===0)o.setEnd(e,n.count);else if(n.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<n.count?n.count-=e.textContent.length:(o.setEnd(e,n.count),n.count=0);else for(let u=0;n.count!==0&&u<e.childNodes.length;u++)o=mt(e.childNodes[u],n,o);return o}const ba=/^https?:\/\//;class ka{constructor(n,o){this.el=n,this.eVm=o,this._range=null}get selection(){if(this.el){const n=document.getSelection();if(ze(n.anchorNode,this.el,!0)&&ze(n.focusNode,this.el,!0))return n}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length>0:!1}get range(){const n=this.selection;return n!==null&&n.rangeCount?n.getRangeAt(0):this._range}get parent(){const n=this.range;if(n!==null){const o=n.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const n=this.parent;return n!==null?ht(n,this.el):null}save(n=this.range){n!==null&&(this._range=n)}restore(n=this._range){const o=document.createRange(),u=document.getSelection();n!==null?(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),u.removeAllRanges(),u.addRange(o)):(u.selectAllChildren(this.el),u.collapseToEnd())}savePosition(){let n=-1,o;const u=document.getSelection(),d=this.el.parentNode;if(u.focusNode&&ze(u.focusNode,d))for(o=u.focusNode,n=u.focusOffset;o&&o!==d;)o!==this.el&&o.previousSibling?(o=o.previousSibling,n+=o.textContent.length):o=o.parentNode;this.savedPos=n}restorePosition(n=0){if(this.savedPos>0&&this.savedPos<n){const o=window.getSelection(),u=mt(this.el,{count:this.savedPos});u&&(u.collapse(!1),o.removeAllRanges(),o.addRange(u))}}hasParent(n,o){const u=o?this.parent:this.blockParent;return u!==null?u.nodeName.toLowerCase()===n.toLowerCase():!1}hasParents(n,o,u=this.parent){return u===null?!1:n.includes(u.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(n,o,u.parentNode):!1}is(n,o){if(this.selection===null)return!1;switch(n){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(n)===o;case"fontName":const u=document.queryCommandValue(n);return u===`"${o}"`||u===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const d=document.queryCommandState(n);return o!==void 0?d===o:d}}getParentAttribute(n){return this.parent!==null?this.parent.getAttribute(n):null}can(n){if(n==="outdent")return this.hasParents(["blockquote","li"],!0);if(n==="indent")return this.hasParents(["li"],!0);if(n==="link")return this.selection!==null||this.is("link")}apply(n,o,u=zt){if(n==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(n,o)&&(n="outdent",o=null),o==="PRE"&&this.is(n,"PRE")&&(o="P");else if(n==="print"){u();const d=window.open();d.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),d.print(),d.close();return}else if(n==="link"){const d=this.getParentAttribute("href");if(d===null){const k=this.selectWord(this.selection),v=k?k.toString():"";if(!v.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=ba.test(v)?v:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(k.getRangeAt(0))}else this.eVm.editLinkUrl.value=d,this.range.selectNodeContents(this.parent),this.save();return}else if(n==="fullscreen"){this.eVm.toggleFullscreen(),u();return}else if(n==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),u();return}document.execCommand(n,!1,o),u()}selectWord(n){if(n===null||n.isCollapsed!==!0||n.modify===void 0)return n;const o=document.createRange();o.setStart(n.anchorNode,n.anchorOffset),o.setEnd(n.focusNode,n.focusOffset);const u=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const d=n.focusNode,k=n.focusOffset;return n.collapse(n.anchorNode,n.anchorOffset),n.modify("move",u[0],"character"),n.modify("move",u[1],"word"),n.extend(d,k),n.modify("extend",u[1],"character"),n.modify("extend",u[0],"word"),n}}const Ca=xe({name:"QTooltip",inheritAttrs:!1,props:{...ct,...Wt,...Vt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ze},self:{type:String,default:"top middle",validator:Ze},offset:{type:Array,default:()=>[14,14],validator:Rt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Gt],setup(e,{slots:n,emit:o,attrs:u}){let d,k;const v=_e(),{proxy:{$q:g}}=v,_=j(null),E=j(!1),q=m(()=>tt(e.anchor,g.lang.rtl)),L=m(()=>tt(e.self,g.lang.rtl)),D=m(()=>e.persistent!==!0),{registerTick:P,removeTick:N}=Jt(),{registerTimeout:b}=Xt(),{transitionProps:x,transitionStyle:K}=Zt(e),{localScrollTarget:ae,changeScrollEvent:F,unconfigureScrollTarget:y}=At(e,oe),{anchorEl:S,canShow:ie,anchorEvents:H}=dt({showing:E,configureAnchorEl:ne}),{show:ue,hide:X}=ea({showing:E,canShow:ie,handleShow:Y,handleHide:W,hideOnRouteChange:D,processOnMount:!0});Object.assign(H,{delayShow:R,delayHide:V});const{showPortal:Z,hidePortal:$,renderPortal:ye}=ta(v,_,se);if(g.platform.is.mobile===!0){const M={anchorEl:S,innerRef:_,onClickOutside(B){return X(B),B.target.classList.contains("q-dialog__backdrop")&&ut(B),!0}},te=m(()=>e.modelValue===null&&e.persistent!==!0&&E.value===!0);J(te,B=>{(B===!0?Yt:et)(M)}),$e(()=>{et(M)})}function Y(M){Z(),P(()=>{k=new MutationObserver(()=>Q()),k.observe(_.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),Q(),oe()}),d===void 0&&(d=J(()=>g.screen.width+"|"+g.screen.height+"|"+e.self+"|"+e.anchor+"|"+g.lang.rtl,Q)),b(()=>{Z(!0),o("show",M)},e.transitionDuration)}function W(M){N(),$(),ee(),b(()=>{$(!0),o("hide",M)},e.transitionDuration)}function ee(){k!==void 0&&(k.disconnect(),k=void 0),d!==void 0&&(d(),d=void 0),y(),Ge(H,"tooltipTemp")}function Q(){const M=_.value;S.value===null||!M||It({el:M,offset:e.offset,anchorEl:S.value,anchorOrigin:q.value,selfOrigin:L.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function R(M){if(g.platform.is.mobile===!0){nt(),document.body.classList.add("non-selectable");const te=S.value,B=["touchmove","touchcancel","touchend","click"].map(U=>[te,U,"delayHide","passiveCapture"]);Je(H,"tooltipTemp",B)}b(()=>{ue(M)},e.delay)}function V(M){g.platform.is.mobile===!0&&(Ge(H,"tooltipTemp"),nt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),b(()=>{X(M)},e.hideDelay)}function ne(){if(e.noParentEvent===!0||S.value===null)return;const M=g.platform.is.mobile===!0?[[S.value,"touchstart","delayShow","passive"]]:[[S.value,"mouseenter","delayShow","passive"],[S.value,"mouseleave","delayHide","passive"]];Je(H,"anchor",M)}function oe(){if(S.value!==null||e.scrollTarget!==void 0){ae.value=aa(S.value,e.scrollTarget);const M=e.noParentEvent===!0?Q:X;F(ae.value,M)}}function G(){return E.value===!0?s("div",{...u,ref:_,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",u.class],style:[u.style,K.value],role:"tooltip"},je(n.default)):null}function se(){return s(ge,x.value,G)}return $e(ee),Object.assign(v.proxy,{updatePosition:Q}),ye}});function gt(e,n,o){n.handler?n.handler(e,o,o.caret):o.runCmd(n.cmd,n.param)}function Ne(e){return s("div",{class:"q-editor__toolbar-group"},e)}function yt(e,n,o,u=!1){const d=u||(n.type==="toggle"?n.toggled?n.toggled(e):n.cmd&&e.caret.is(n.cmd,n.param):!1),k=[];if(n.tip&&e.$q.platform.is.desktop){const v=n.key?s("div",[s("small",`(CTRL + ${String.fromCharCode(n.key)})`)]):null;k.push(s(Ca,{delay:1e3},()=>[s("div",{innerHTML:n.tip}),v]))}return s(I,{...e.buttonProps.value,icon:n.icon!==null?n.icon:void 0,color:d?n.toggleColor||e.props.toolbarToggleColor:n.color||e.props.toolbarColor,textColor:d&&!e.props.toolbarPush?null:n.textColor||e.props.toolbarTextColor,label:n.label,disable:n.disable?typeof n.disable=="function"?n.disable(e):!0:!1,size:"sm",onClick(v){o&&o(),gt(v,n,e)}},()=>k)}function wa(e,n){const o=n.list==="only-icons";let u=n.label,d=n.icon!==null?n.icon:void 0,k,v;function g(){E.component.proxy.hide()}if(o)v=n.options.map(q=>{const L=q.type===void 0?e.caret.is(q.cmd,q.param):!1;return L&&(u=q.tip,d=q.icon!==null?q.icon:void 0),yt(e,q,g,L)}),k=e.toolbarBackgroundClass.value,v=[Ne(v)];else{const q=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,L=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,D=n.list==="no-icons";v=n.options.map(P=>{const N=P.disable?P.disable(e):!1,b=P.type===void 0?e.caret.is(P.cmd,P.param):!1;b&&(u=P.tip,d=P.icon!==null?P.icon:void 0);const x=P.htmlTip;return s(Qt,{active:b,activeClass:q,clickable:!0,disable:N,dense:!0,onClick(K){g(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),gt(K,P,e)}},()=>[D===!0?null:s(at,{class:b?q:L,side:!0},()=>s(Lt,{name:P.icon!==null?P.icon:void 0})),s(at,x?()=>s("div",{class:"text-no-wrap",innerHTML:P.htmlTip}):P.tip?()=>s("div",{class:"text-no-wrap"},P.tip):void 0)])}),k=[e.toolbarBackgroundClass.value,L]}const _=n.highlight&&u!==n.label,E=s(Ut,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:_?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:_&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:n.fixedLabel?n.label:u,icon:n.fixedIcon?n.icon!==null?n.icon:void 0:d,contentClass:k},()=>v);return E}function xa(e){if(e.caret)return e.buttons.value.filter(n=>!e.isViewingSource.value||n.find(o=>o.cmd==="viewsource")).map(n=>Ne(n.map(o=>e.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?je(e.slots[o.slot]):o.type==="dropdown"?wa(e,o):yt(e,o))))}function _a(e,n,o,u={}){const d=Object.keys(u);if(d.length===0)return{};const k={default_font:{cmd:"fontName",param:e,icon:o,tip:n}};return d.forEach(v=>{const g=u[v];k[v]={cmd:"fontName",param:g,icon:o,tip:g,htmlTip:`<font face="${g}">${g}</font>`}}),k}function Sa(e){if(e.caret){const n=e.props.toolbarColor||e.props.toolbarTextColor;let o=e.editLinkUrl.value;const u=()=>{e.caret.restore(),o!==e.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),e.editLinkUrl.value=null};return[s("div",{class:`q-mx-xs text-${n}`},`${e.$q.lang.editor.url}: `),s("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:d=>{Et(d),o=d.target.value},onKeydown:d=>{if(st(d)!==!0)switch(d.keyCode){case 13:return Xe(d),u();case 27:Xe(d),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),Ne([s(I,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),s(I,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:u})])]}}const Ta=Object.prototype.toString,Ee=Object.prototype.hasOwnProperty,qa=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function lt(e){if(e!==Object(e)||qa.has(Ta.call(e))===!0||e.constructor&&Ee.call(e,"constructor")===!1&&Ee.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let n;for(n in e);return n===void 0||Ee.call(e,n)}function pt(){let e,n,o,u,d,k,v=arguments[0]||{},g=1,_=!1;const E=arguments.length;for(typeof v=="boolean"&&(_=v,v=arguments[1]||{},g=2),Object(v)!==v&&typeof v!="function"&&(v={}),E===g&&(v=this,g--);g<E;g++)if((e=arguments[g])!==null)for(n in e)o=v[n],u=e[n],v!==u&&(_===!0&&u&&((d=Array.isArray(u))||lt(u)===!0)?(d===!0?k=Array.isArray(o)===!0?o:[]:k=lt(o)===!0?o:{},v[n]=pt(_,k,u)):u!==void 0&&(v[n]=u));return v}const Qa=xe({name:"QEditor",props:{...ft,...la,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(n=>n.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ra,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur"],setup(e,{slots:n,emit:o,attrs:u}){const{proxy:d,vnode:k}=_e(),{$q:v}=d,g=vt(e,v),{inFullscreen:_,toggleFullscreen:E}=ia(),q=ua(u,k),L=j(null),D=j(null),P=j(null),N=j(!1),b=m(()=>!e.readonly&&!e.disable);let x,K,ae=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),x=window.getComputedStyle(document.body).fontFamily;const F=m(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),y=m(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!b.value,size:"sm"})),S=m(()=>{const r=v.lang.editor,i=v.iconSet.editor;return{bold:{cmd:"bold",icon:i.bold,tip:r.bold,key:66},italic:{cmd:"italic",icon:i.italic,tip:r.italic,key:73},strike:{cmd:"strikeThrough",icon:i.strikethrough,tip:r.strikethrough,key:83},underline:{cmd:"underline",icon:i.underline,tip:r.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:i.unorderedList,tip:r.unorderedList},ordered:{cmd:"insertOrderedList",icon:i.orderedList,tip:r.orderedList},subscript:{cmd:"subscript",icon:i.subscript,tip:r.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:i.superscript,tip:r.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:w=>w.caret&&!w.caret.can("link"),icon:i.hyperlink,tip:r.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:i.toggleFullscreen,tip:r.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:i.viewSource,tip:r.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:i.quote,tip:r.quote,key:81},left:{cmd:"justifyLeft",icon:i.left,tip:r.left},center:{cmd:"justifyCenter",icon:i.center,tip:r.center},right:{cmd:"justifyRight",icon:i.right,tip:r.right},justify:{cmd:"justifyFull",icon:i.justify,tip:r.justify},print:{type:"no-state",cmd:"print",icon:i.print,tip:r.print,key:80},outdent:{type:"no-state",disable:w=>w.caret&&!w.caret.can("outdent"),cmd:"outdent",icon:i.outdent,tip:r.outdent},indent:{type:"no-state",disable:w=>w.caret&&!w.caret.can("indent"),cmd:"indent",icon:i.indent,tip:r.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:i.removeFormat,tip:r.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:i.hr,tip:r.hr},undo:{type:"no-state",cmd:"undo",icon:i.undo,tip:r.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:i.redo,tip:r.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:i.heading1||i.heading,tip:r.heading1,htmlTip:`<h1 class="q-ma-none">${r.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:i.heading2||i.heading,tip:r.heading2,htmlTip:`<h2 class="q-ma-none">${r.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:i.heading3||i.heading,tip:r.heading3,htmlTip:`<h3 class="q-ma-none">${r.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:i.heading4||i.heading,tip:r.heading4,htmlTip:`<h4 class="q-ma-none">${r.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:i.heading5||i.heading,tip:r.heading5,htmlTip:`<h5 class="q-ma-none">${r.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:i.heading6||i.heading,tip:r.heading6,htmlTip:`<h6 class="q-ma-none">${r.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:i.heading,tip:r.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:i.code,htmlTip:`<code>${r.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:i.size1||i.size,tip:r.size1,htmlTip:`<font size="1">${r.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:i.size2||i.size,tip:r.size2,htmlTip:`<font size="2">${r.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:i.size3||i.size,tip:r.size3,htmlTip:`<font size="3">${r.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:i.size4||i.size,tip:r.size4,htmlTip:`<font size="4">${r.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:i.size5||i.size,tip:r.size5,htmlTip:`<font size="5">${r.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:i.size6||i.size,tip:r.size6,htmlTip:`<font size="6">${r.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:i.size7||i.size,tip:r.size7,htmlTip:`<font size="7">${r.size7}</font>`}}}),ie=m(()=>{const r=e.definitions||{},i=e.definitions||e.fonts?pt(!0,{},S.value,r,_a(x,v.lang.editor.defaultFont,v.iconSet.editor.font,e.fonts)):S.value;return e.toolbar.map(w=>w.map(C=>{if(C.options)return{type:"dropdown",icon:C.icon,label:C.label,size:"sm",dense:!0,fixedLabel:C.fixedLabel,fixedIcon:C.fixedIcon,highlight:C.highlight,list:C.list,options:C.options.map(pe=>i[pe])};const O=i[C];return O?O.type==="no-state"||r[C]&&(O.cmd===void 0||S.value[O.cmd]&&S.value[O.cmd].type==="no-state")?O:Object.assign({type:"toggle"},O):{type:"slot",slot:C}}))}),H={$q:v,props:e,slots:n,inFullscreen:_,toggleFullscreen:E,runCmd:te,isViewingSource:N,editLinkUrl:P,toolbarBackgroundClass:F,buttonProps:y,contentRef:D,buttons:ie,setContent:M};J(()=>e.modelValue,r=>{ae!==r&&(ae=r,M(r,!0))});const ue=m(()=>e.toolbar&&e.toolbar.length>0),X=m(()=>{const r={},i=w=>{w.key&&(r[w.key]={cmd:w.cmd,param:w.param})};return ie.value.forEach(w=>{w.forEach(C=>{C.options?C.options.forEach(i):i(C)})}),r}),Z=m(()=>_.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),$=m(()=>`q-editor q-editor--${N.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(_.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(g.value===!0?" q-editor--dark q-dark":"")),ye=m(()=>[e.contentClass,"q-editor__content",{col:_.value,"overflow-auto":_.value||e.maxHeight}]),Y=m(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});function W(){if(D.value!==null){const r=`inner${N.value===!0?"Text":"HTML"}`,i=D.value[r];i!==e.modelValue&&(ae=i,o("update:modelValue",i))}}function ee(r){if(o("keydown",r),r.ctrlKey!==!0||st(r)===!0){B();return}const i=r.keyCode,w=X.value[i];if(w!==void 0){const{cmd:C,param:O}=w;ut(r),te(C,O,!1)}}function Q(r){B(),o("click",r)}function R(r){if(D.value!==null){const{scrollTop:i,scrollHeight:w}=D.value;K=w-i}H.caret.save(),o("blur",r)}function V(r){Be(()=>{D.value!==null&&K!==void 0&&(D.value.scrollTop=D.value.scrollHeight-K)}),o("focus",r)}function ne(r){const i=L.value;if(i!==null&&i.contains(r.target)===!0&&(r.relatedTarget===null||i.contains(r.relatedTarget)!==!0)){const w=`inner${N.value===!0?"Text":"HTML"}`;H.caret.restorePosition(D.value[w].length),B()}}function oe(r){const i=L.value;i!==null&&i.contains(r.target)===!0&&(r.relatedTarget===null||i.contains(r.relatedTarget)!==!0)&&(H.caret.savePosition(),B())}function G(){K=void 0}function se(r){H.caret.save()}function M(r,i){if(D.value!==null){i===!0&&H.caret.savePosition();const w=`inner${N.value===!0?"Text":"HTML"}`;D.value[w]=r,i===!0&&(H.caret.restorePosition(D.value[w].length),B())}}function te(r,i,w=!0){U(),H.caret.restore(),H.caret.apply(r,i,()=>{U(),H.caret.save(),w&&B()})}function B(){setTimeout(()=>{P.value=null,d.$forceUpdate()},1)}function U(){sa(()=>{D.value!==null&&D.value.focus({preventScroll:!0})})}function ke(){return D.value}return $t(()=>{H.caret=d.caret=new ka(D.value,H),M(e.modelValue),B(),document.addEventListener("selectionchange",se)}),$e(()=>{document.removeEventListener("selectionchange",se)}),Object.assign(d,{runCmd:te,refreshToolbar:B,focus:U,getContentEl:ke}),()=>{let r;if(ue.value){const i=[s("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+F.value},xa(H))];P.value!==null&&i.push(s("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+F.value},Sa(H))),r=s("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},i)}return s("div",{ref:L,class:$.value,style:{height:_.value===!0?"100%":null},...Y.value,onFocusin:ne,onFocusout:oe},[r,s("div",{ref:D,style:Z.value,class:ye.value,contenteditable:b.value,placeholder:e.placeholder,...q.listeners.value,onInput:W,onKeydown:ee,onClick:Q,onBlur:R,onFocus:V,onMousedown:G,onTouchstartPassive:G})])}}}),Da=["gregorian","persian"],Pa={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Da.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ha=["update:modelValue"];function le(e){return e.year+"/"+fe(e.month)+"/"+fe(e.day)}function Oa(e,n){const o=m(()=>e.disable!==!0&&e.readonly!==!0),u=m(()=>e.editable===!0?0:-1),d=m(()=>{const g=[];return e.color!==void 0&&g.push(`bg-${e.color}`),e.textColor!==void 0&&g.push(`text-${e.textColor}`),g.join(" ")});function k(){return e.locale!==void 0?{...n.lang.date,...e.locale}:n.lang.date}function v(g){const _=new Date,E=g===!0?null:0;if(e.calendar==="persian"){const q=ha(_);return{year:q.jy,month:q.jm,day:q.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:E,minute:E,second:E,millisecond:E}}return{editable:o,tabindex:u,headerClass:d,getLocale:k,getCurrentDate:v}}const de=20,Ma=["Calendar","Years","Months"],rt=e=>Ma.includes(e),Le=e=>/^-?[\d]+\/[0-1]\d$/.test(e),me=" \u2014 ";function re(e){return e.year+"/"+fe(e.month)}const Ua=xe({name:"QDate",props:{...Pa,...ca,...ft,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Le},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Le},navigationMaxYearMonth:{type:String,validator:Le},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:rt}},emits:[...Ha,"rangeStart","rangeEnd","navigation"],setup(e,{slots:n,emit:o}){const{proxy:u}=_e(),{$q:d}=u,k=vt(e,d),{getCache:v}=va(),{tabindex:g,headerClass:_,getLocale:E,getCurrentDate:q}=Oa(e,d);let L;const D=da(e),P=fa(D),N=j(null),b=j(Ie()),x=j(E()),K=m(()=>Ie()),ae=m(()=>E()),F=m(()=>q()),y=j(Ye(b.value,x.value)),S=j(e.defaultView),ie=d.lang.rtl===!0?"right":"left",H=j(ie.value),ue=j(ie.value),X=y.value.year,Z=j(X-X%de-(X<0?de:0)),$=j(null),ye=m(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(k.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),Y=m(()=>e.color||"primary"),W=m(()=>e.textColor||"white"),ee=m(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Q=m(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),R=m(()=>Q.value.filter(t=>typeof t=="string").map(t=>Te(t,b.value,x.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),V=m(()=>{const t=a=>Te(a,b.value,x.value);return Q.value.filter(a=>Bt(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),ne=m(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=ot(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),oe=m(()=>e.calendar==="persian"?le:(t,a,l)=>ma(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?b.value:a,l===void 0?x.value:l,t.year,t.timezoneOffset)),G=m(()=>R.value.length+V.value.reduce((t,a)=>t+1+ga(ne.value(a.to),ne.value(a.from)),0)),se=m(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length>0)return e.title;if($.value!==null){const l=$.value.init,f=ne.value(l);return x.value.daysShort[f.getDay()]+", "+x.value.monthsShort[l.month-1]+" "+l.day+me+"?"}if(G.value===0)return me;if(G.value>1)return`${G.value} ${x.value.pluralDay}`;const t=R.value[0],a=ne.value(t);return isNaN(a.valueOf())===!0?me:x.value.headerTitle!==void 0?x.value.headerTitle(a,t):x.value.daysShort[a.getDay()]+", "+x.value.monthsShort[t.month-1]+" "+t.day}),M=m(()=>R.value.concat(V.value.map(a=>a.from)).sort((a,l)=>a.year-l.year||a.month-l.month)[0]),te=m(()=>R.value.concat(V.value.map(a=>a.to)).sort((a,l)=>l.year-a.year||l.month-a.month)[0]),B=m(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length>0)return e.subtitle;if(G.value===0)return me;if(G.value>1){const t=M.value,a=te.value,l=x.value.monthsShort;return l[t.month-1]+(t.year!==a.year?" "+t.year+me+l[a.month-1]+" ":t.month!==a.month?me+l[a.month-1]:"")+" "+a.year}return R.value[0].year}),U=m(()=>{const t=[d.iconSet.datetime.arrowLeft,d.iconSet.datetime.arrowRight];return d.lang.rtl===!0?t.reverse():t}),ke=m(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):x.value.firstDayOfWeek),r=m(()=>{const t=x.value.daysShort,a=ke.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),i=m(()=>{const t=y.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Me(t.year,t.month)}),w=m(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),C=m(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),O=m(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),pe=m(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return C.value!==null&&C.value.year>=y.value.year&&(t.year.prev=!1,C.value.year===y.value.year&&C.value.month>=y.value.month&&(t.month.prev=!1)),O.value!==null&&O.value.year<=y.value.year&&(t.year.next=!1,O.value.year===y.value.year&&O.value.month<=y.value.month&&(t.month.next=!1)),t}),Ce=m(()=>{const t={};return R.value.forEach(a=>{const l=re(a);t[l]===void 0&&(t[l]=[]),t[l].push(a.day)}),t}),Fe=m(()=>{const t={};return V.value.forEach(a=>{const l=re(a.from),f=re(a.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:a.from.day,to:l===f?a.to.day:void 0,range:a}),l<f){let c;const{year:T,month:h}=a.from,p=h<12?{year:T,month:h+1}:{year:T+1,month:1};for(;(c=re(p))<=f;)t[c]===void 0&&(t[c]=[]),t[c].push({from:void 0,to:c===f?a.to.day:void 0,range:a}),p.month++,p.month>12&&(p.year++,p.month=1)}}),t}),be=m(()=>{if($.value===null)return;const{init:t,initHash:a,final:l,finalHash:f}=$.value,[c,T]=a<=f?[t,l]:[l,t],h=re(c),p=re(T);if(h!==A.value&&p!==A.value)return;const z={};return h===A.value?(z.from=c.day,z.includeFrom=!0):z.from=1,p===A.value?(z.to=T.day,z.includeTo=!0):z.to=i.value,z}),A=m(()=>re(y.value)),bt=m(()=>{const t={};if(e.options===void 0){for(let l=1;l<=i.value;l++)t[l]=!0;return t}const a=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=i.value;l++){const f=A.value+"/"+fe(l);t[l]=a(f)}return t}),kt=m(()=>{const t={};if(e.events===void 0)for(let a=1;a<=i.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=i.value;l++){const f=A.value+"/"+fe(l);t[l]=a(f)===!0&&w.value(f)}}return t}),Ct=m(()=>{let t,a;const{year:l,month:f}=y.value;if(e.calendar!=="persian")t=new Date(l,f-1,1),a=new Date(l,f-1,0).getDate();else{const c=ot(l,f,1);t=new Date(c.gy,c.gm-1,c.gd);let T=f-1,h=l;T===0&&(T=12,h--),a=Me(h,T)}return{days:t.getDay()-ke.value-1,endDay:a}}),Re=m(()=>{const t=[],{days:a,endDay:l}=Ct.value,f=a<0?a+7:a;if(f<6)for(let h=l-f;h<=l;h++)t.push({i:h,fill:!0});const c=t.length;for(let h=1;h<=i.value;h++){const p={i:h,event:kt.value[h],classes:[]};bt.value[h]===!0&&(p.in=!0,p.flat=!0),t.push(p)}if(Ce.value[A.value]!==void 0&&Ce.value[A.value].forEach(h=>{const p=c+h-1;Object.assign(t[p],{selected:!0,unelevated:!0,flat:!1,color:Y.value,textColor:W.value})}),Fe.value[A.value]!==void 0&&Fe.value[A.value].forEach(h=>{if(h.from!==void 0){const p=c+h.from-1,z=c+(h.to||i.value)-1;for(let Oe=p;Oe<=z;Oe++)Object.assign(t[Oe],{range:h.range,unelevated:!0,color:Y.value,textColor:W.value});Object.assign(t[p],{rangeFrom:!0,flat:!1}),h.to!==void 0&&Object.assign(t[z],{rangeTo:!0,flat:!1})}else if(h.to!==void 0){const p=c+h.to-1;for(let z=c;z<=p;z++)Object.assign(t[z],{range:h.range,unelevated:!0,color:Y.value,textColor:W.value});Object.assign(t[p],{flat:!1,rangeTo:!0})}else{const p=c+i.value-1;for(let z=c;z<=p;z++)Object.assign(t[z],{range:h.range,unelevated:!0,color:Y.value,textColor:W.value})}}),be.value!==void 0){const h=c+be.value.from-1,p=c+be.value.to-1;for(let z=h;z<=p;z++)t[z].color=Y.value,t[z].editRange=!0;be.value.includeFrom===!0&&(t[h].editRangeFrom=!0),be.value.includeTo===!0&&(t[p].editRangeTo=!0)}y.value.year===F.value.year&&y.value.month===F.value.month&&(t[c+F.value.day-1].today=!0);const T=t.length%7;if(T>0){const h=7-T;for(let p=1;p<=h;p++)t.push({i:p,fill:!0})}return t.forEach(h=>{let p="q-date__calendar-item ";h.fill===!0?p+="q-date__calendar-item--fill":(p+=`q-date__calendar-item--${h.in===!0?"in":"out"}`,h.range!==void 0&&(p+=` q-date__range${h.rangeTo===!0?"-to":h.rangeFrom===!0?"-from":""}`),h.editRange===!0&&(p+=` q-date__edit-range${h.editRangeFrom===!0?"-from":""}${h.editRangeTo===!0?"-to":""}`),(h.range!==void 0||h.editRange===!0)&&(p+=` text-${h.color}`)),h.classes=p}),t}),wt=m(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});J(()=>e.modelValue,t=>{if(L===t)L=0;else{const{year:a,month:l}=Ye(b.value,x.value);ve(a,l)}}),J(S,()=>{N.value!==null&&u.$el.contains(document.activeElement)===!0&&N.value.focus()}),J(()=>y.value.year,t=>{o("navigation",{year:t,month:y.value.month})}),J(()=>y.value.month,t=>{o("navigation",{year:y.value.year,month:t})}),J(K,t=>{Ve(t,x.value,"mask"),b.value=t}),J(ae,t=>{Ve(b.value,t,"locale"),x.value=t});function Ae(){const t=F.value,a=Ce.value[re(t)];(a===void 0||a.includes(t.day)===!1)&&De(t),Se(t.year,t.month)}function xt(t){rt(t)===!0&&(S.value=t)}function _t(t,a){["month","year"].includes(t)&&(t==="month"?Ue:qe)(a===!0?-1:1)}function Se(t,a){S.value="Calendar",ve(t,a)}function St(t,a){if(e.range===!1||!t){$.value=null;return}const l=Object.assign({...y.value},t),f=a!==void 0?Object.assign({...y.value},a):l;$.value={init:l,initHash:le(l),final:f,finalHash:le(f)},Se(l.year,l.month)}function Ie(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Te(t,a,l){return ya(t,a,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ye(t,a){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return Qe();const f=l[l.length-1],c=Te(f.from!==void 0?f.from:f,t,a);return c.dateHash===null?Qe():c}function Qe(){let t,a;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),a=parseInt(l[1],10)}else{const l=F.value!==void 0?F.value:q();t=l.year,a=l.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+fe(a)+"/01"}}function Ue(t){let a=y.value.year,l=Number(y.value.month)+t;l===13?(l=1,a++):l===0&&(l=12,a--),ve(a,l),ee.value===!0&&we("month")}function qe(t){const a=Number(y.value.year)+t;ve(a,y.value.month),ee.value===!0&&we("year")}function Tt(t){ve(t,y.value.month),S.value=e.defaultView==="Years"?"Months":"Calendar",ee.value===!0&&we("year")}function qt(t){ve(y.value.year,t),S.value="Calendar",ee.value===!0&&we("month")}function Dt(t,a){const l=Ce.value[a];(l!==void 0&&l.includes(t.day)===!0?Pe:De)(t)}function ce(t){return{year:t.year,month:t.month,day:t.day}}function ve(t,a){C.value!==null&&t<=C.value.year&&(t=C.value.year,a<C.value.month&&(a=C.value.month)),O.value!==null&&t>=O.value.year&&(t=O.value.year,a>O.value.month&&(a=O.value.month));const l=t+"/"+fe(a)+"/01";l!==y.value.dateHash&&(H.value=y.value.dateHash<l==(d.lang.rtl!==!0)?"left":"right",t!==y.value.year&&(ue.value=H.value),Be(()=>{Z.value=t-t%de-(t<0?de:0),Object.assign(y.value,{year:t,month:a,day:1,dateHash:l})}))}function Ke(t,a,l){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;L=f;const{reason:c,details:T}=We(a,l);o("update:modelValue",f,c,T)}function we(t){const a=R.value[0]!==void 0&&R.value[0].dateHash!==null?{...R.value[0]}:{...y.value};Be(()=>{a.year=y.value.year,a.month=y.value.month;const l=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Me(a.year,a.month);a.day=Math.min(Math.max(1,a.day),l);const f=he(a);L=f;const{details:c}=We("",a);o("update:modelValue",f,t,c)})}function We(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...ce(a.target),from:ce(a.from),to:ce(a.to)}}:{reason:`${t}-day`,details:ce(a)}}function he(t,a,l){return t.from!==void 0?{from:oe.value(t.from,a,l),to:oe.value(t.to,a,l)}:oe.value(t,a,l)}function De(t){let a;if(e.multiple===!0)if(t.from!==void 0){const l=le(t.from),f=le(t.to),c=R.value.filter(h=>h.dateHash<l||h.dateHash>f),T=V.value.filter(({from:h,to:p})=>p.dateHash<l||h.dateHash>f);a=c.concat(T).concat(t).map(h=>he(h))}else{const l=Q.value.slice();l.push(he(t)),a=l}else a=he(t);Ke(a,"add",t)}function Pe(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=he(t);t.from!==void 0?a=e.modelValue.filter(f=>f.from!==void 0?f.from!==l.from&&f.to!==l.to:!0):a=e.modelValue.filter(f=>f!==l),a.length===0&&(a=null)}Ke(a,"remove",t)}function Ve(t,a,l){const f=R.value.concat(V.value).map(c=>he(c,t,a)).filter(c=>c.from!==void 0?c.from.dateHash!==null&&c.to.dateHash!==null:c.dateHash!==null);o("update:modelValue",(e.multiple===!0?f:f[0])||null,l)}function Pt(){if(e.minimal!==!0)return s("div",{class:"q-date__header "+_.value},[s("div",{class:"relative-position"},[s(ge,{name:"q-transition--fade"},()=>s("div",{key:"h-yr-"+B.value,class:"q-date__header-subtitle q-date__header-link "+(S.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...v("vY",{onClick(){S.value="Years"},onKeyup(t){t.keyCode===13&&(S.value="Years")}})},[B.value]))]),s("div",{class:"q-date__header-title relative-position flex no-wrap"},[s("div",{class:"relative-position col"},[s(ge,{name:"q-transition--fade"},()=>s("div",{key:"h-sub"+se.value,class:"q-date__header-title-label q-date__header-link "+(S.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value,...v("vC",{onClick(){S.value="Calendar"},onKeyup(t){t.keyCode===13&&(S.value="Calendar")}})},[se.value]))]),e.todayBtn===!0?s(I,{class:"q-date__header-today self-start",icon:d.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:Ae}):null])])}function He({label:t,type:a,key:l,dir:f,goTo:c,boundaries:T,cls:h}){return[s("div",{class:"row items-center q-date__arrow"},[s(I,{round:!0,dense:!0,size:"sm",flat:!0,icon:U.value[0],tabindex:g.value,disable:T.prev===!1,...v("go-#"+a,{onClick(){c(-1)}})})]),s("div",{class:"relative-position overflow-hidden flex flex-center"+h},[s(ge,{name:"q-transition--jump-"+f},()=>s("div",{key:l},[s(I,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:g.value,...v("view#"+a,{onClick:()=>{S.value=a}})})]))]),s("div",{class:"row items-center q-date__arrow"},[s(I,{round:!0,dense:!0,size:"sm",flat:!0,icon:U.value[1],tabindex:g.value,disable:T.next===!1,...v("go+#"+a,{onClick(){c(1)}})})])]}const Ht={Calendar:()=>[s("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[s("div",{class:"q-date__navigation row items-center no-wrap"},He({label:x.value.months[y.value.month-1],type:"Months",key:y.value.month,dir:H.value,goTo:Ue,boundaries:pe.value.month,cls:" col"}).concat(He({label:y.value.year,type:"Years",key:y.value.year,dir:ue.value,goTo:qe,boundaries:pe.value.year,cls:""}))),s("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},r.value.map(t=>s("div",{class:"q-date__calendar-item"},[s("div",t)]))),s("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[s(ge,{name:"q-transition--slide-"+H.value},()=>s("div",{key:A.value,class:"q-date__calendar-days fit"},Re.value.map(t=>s("div",{class:t.classes},[t.in===!0?s(I,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:g.value,...v("day#"+t.i,{onClick:()=>{Ot(t.i)},onMouseover:()=>{Mt(t.i)}})},t.event!==!1?()=>s("div",{class:"q-date__event bg-"+t.event}):null):s("div",""+t.i)]))))])])],Months(){const t=y.value.year===F.value.year,a=f=>C.value!==null&&y.value.year===C.value.year&&C.value.month>f||O.value!==null&&y.value.year===O.value.year&&O.value.month<f,l=x.value.monthsShort.map((f,c)=>{const T=y.value.month===c+1;return s("div",{class:"q-date__months-item flex flex-center"},[s(I,{class:t===!0&&F.value.month===c+1?"q-date__today":null,flat:T!==!0,label:f,unelevated:T,color:T===!0?Y.value:null,textColor:T===!0?W.value:null,tabindex:g.value,disable:a(c+1),...v("month#"+c,{onClick:()=>{qt(c+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(s("div",{class:"row no-wrap full-width"},[He({label:y.value.year,type:"Years",key:y.value.year,dir:ue.value,goTo:qe,boundaries:pe.value.year,cls:" col"})])),s("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=Z.value,a=t+de,l=[],f=c=>C.value!==null&&C.value.year>c||O.value!==null&&O.value.year<c;for(let c=t;c<=a;c++){const T=y.value.year===c;l.push(s("div",{class:"q-date__years-item flex flex-center"},[s(I,{key:"yr"+c,class:F.value.year===c?"q-date__today":null,flat:!T,label:c,dense:!0,unelevated:T,color:T===!0?Y.value:null,textColor:T===!0?W.value:null,tabindex:g.value,disable:f(c),...v("yr#"+c,{onClick:()=>{Tt(c)}})})]))}return s("div",{class:"q-date__view q-date__years flex flex-center"},[s("div",{class:"col-auto"},[s(I,{round:!0,dense:!0,flat:!0,icon:U.value[0],tabindex:g.value,disable:f(t),...v("y-",{onClick:()=>{Z.value-=de}})})]),s("div",{class:"q-date__years-content col self-stretch row items-center"},l),s("div",{class:"col-auto"},[s(I,{round:!0,dense:!0,flat:!0,icon:U.value[1],tabindex:g.value,disable:f(a),...v("y+",{onClick:()=>{Z.value+=de}})})])])}};function Ot(t){const a={...y.value,day:t};if(e.range===!1){Dt(a,A.value);return}if($.value===null){const l=Re.value.find(c=>c.fill!==!0&&c.i===t);if(e.noUnset!==!0&&l.range!==void 0){Pe({target:a,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Pe(a);return}const f=le(a);$.value={init:a,initHash:f,final:a,finalHash:f},o("rangeStart",ce(a))}else{const l=$.value.initHash,f=le(a),c=l<=f?{from:$.value.init,to:a}:{from:a,to:$.value.init};$.value=null,De(l===f?a:{target:a,...c}),o("rangeEnd",{from:ce(c.from),to:ce(c.to)})}}function Mt(t){if($.value!==null){const a={...y.value,day:t};Object.assign($.value,{final:a,finalHash:le(a)})}}return Object.assign(u,{setToday:Ae,setView:xt,offsetCalendar:_t,setCalendarTo:Se,setEditingRange:St}),()=>{const t=[s("div",{class:"q-date__content col relative-position"},[s(ge,{name:"q-transition--fade"},Ht[S.value])])],a=je(n.default);return a!==void 0&&t.push(s("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&P(t,"push"),s("div",{class:ye.value,...wt.value},[Pt(),s("div",{ref:N,class:"q-date__main col column",tabindex:-1},t)])}}}),Ka=xe({name:"QPopupProxy",props:{...ct,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:n,emit:o,attrs:u}){const{proxy:d}=_e(),{$q:k}=d,v=j(!1),g=j(null),_=m(()=>parseInt(e.breakpoint,10)),{canShow:E}=dt({showing:v});function q(){return k.screen.width<_.value||k.screen.height<_.value?"dialog":"menu"}const L=j(q()),D=m(()=>L.value==="menu"?{maxHeight:"99vh"}:{});J(()=>q(),b=>{v.value!==!0&&(L.value=b)});function P(b){v.value=!0,o("show",b)}function N(b){v.value=!1,L.value=q(),o("hide",b)}return Object.assign(d,{show(b){E(b)===!0&&g.value.show(b)},hide(b){g.value.hide(b)},toggle(b){g.value.toggle(b)}}),jt(d,"currentComponent",()=>({type:L.value,ref:g.value})),()=>{const b={ref:g,...D.value,...u,onShow:P,onHide:N};let x;return L.value==="dialog"?x=pa:(x=Kt,Object.assign(b,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),s(x,b,n.default)}}});function it(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const n=parseInt(e,10);return isNaN(n)?0:n}const Wa=Nt({name:"close-popup",beforeMount(e,{value:n}){const o={depth:it(n),handler(u){o.depth!==0&&setTimeout(()=>{const d=na(e);d!==void 0&&oa(d,u,o.depth)})},handlerKey(u){Ft(u,13)===!0&&o.handler(u)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:n,oldValue:o}){n!==o&&(e.__qclosepopup.depth=it(n))},beforeUnmount(e){const n=e.__qclosepopup;e.removeEventListener("click",n.handler),e.removeEventListener("keyup",n.handlerKey),delete e.__qclosepopup}});export{Wa as C,Qa as Q,Ka as a,Ua as b};
