import{Q as h}from"./QCardSection.16cad2ce.js";import{Q as _}from"./QSeparator.76d3a03b.js";import{Q}from"./QImg.7832a2e8.js";import{u as U,r as d,o as c,c as P,w as t,b as e,d as F,a as m,L as g,M as x,a3 as k,a8 as w,f as p,e as y,g as n,v as A,aq as $}from"./app.5537cded.js";import{Q as C}from"./QInput.6a771f70.js";import{a as I,Q as R}from"./QCard.0dd6e118.js";import{Q as j}from"./QSpace.0e56d929.js";import{Q as q}from"./QForm.109d485f.js";import{_ as z}from"./InputError.732f7572.js";import{_ as S}from"./SecondaryButton.a679b538.js";import"./focus-manager.c162f84c.js";import"./use-key-composition.f26dbfe8.js";import"./uid.3b368bd0.js";const D=m("div",{class:"text-h6"},"Profile Information",-1),E=m("div",{class:"text-subtitle2"}," Update your account's profile information and email address. ",-1),L={key:0},M={class:"flex"},T={class:"q-gutter-md w-full"},le={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const f=u,a=U({_method:"PUT",name:f.user.name,email:f.user.email,photo:null});d(null);const i=d(null),l=d(null),V=()=>{l.value&&(a.photo=l.value.files[0]),a.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>v()})},b=()=>{l.value.click()},N=()=>{const r=l.value.files[0];if(!r)return;const o=new FileReader;o.onload=s=>{i.value=s.target.result},o.readAsDataURL(r)},B=()=>{$.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{i.value=null,v()}})},v=()=>{var r;(r=l.value)!=null&&r.value&&(l.value.value=null)};return(r,o)=>(c(),P(q,{class:"mx-auto"},{default:t(()=>[e(R,{flat:"",bordered:""},{default:t(()=>[e(h,null,{default:t(()=>[D,E]),_:1}),e(_),e(h,null,{default:t(()=>[r.$page.props.jetstream.managesProfilePhotos?(c(),F("div",L,[m("input",{ref_key:"photoInput",ref:l,type:"file",class:"hidden",onChange:N},null,544),m("div",M,[g(e(k,{size:"150px",class:"mx-auto"},{default:t(()=>[e(Q,{src:u.user.profile_photo_url,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,!i.value]]),g(e(k,{size:"150px",class:"mx-auto"},{default:t(()=>[e(Q,{src:i.value,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[x,i.value]])]),e(S,{class:"mt-2 mr-2",type:"button",onClick:w(b,["prevent"])},{default:t(()=>[p(" Select A New Photo ")]),_:1},8,["onClick"]),u.user.profile_photo_path?(c(),P(S,{key:0,type:"button",class:"mt-2",onClick:w(B,["prevent"])},{default:t(()=>[p(" Remove Photo ")]),_:1},8,["onClick"])):y("",!0),e(z,{message:n(a).errors.photo,class:"mt-2"},null,8,["message"])])):y("",!0)]),_:1}),e(I,null,{default:t(()=>[m("div",T,[e(C,{type:"text",modelValue:n(a).name,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).name=s),outlined:"",label:"Name"},null,8,["modelValue"]),e(C,{type:"text",modelValue:n(a).email,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).email=s),outlined:"",label:"Email"},null,8,["modelValue"])])]),_:1}),e(_),e(I,null,{default:t(()=>[e(j),e(A,{unelevated:"",color:"primary",onClick:o[2]||(o[2]=s=>V()),loading:n(a).processing},{default:t(()=>[p("Save")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}};export{le as default};
