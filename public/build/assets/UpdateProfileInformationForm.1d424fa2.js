import{a as h,b as _,Q as U}from"./QCard.e9262469.js";import{Q}from"./QSeparator.0c506dd5.js";import{Q as P}from"./QImg.86b444d3.js";import{u as F,r as d,o as c,c as g,w as t,b as e,d as A,a as m,L as x,M as k,a3 as w,a8 as y,f as p,e as C,g as n,v as $,aq as R}from"./app.fb59cb62.js";import{Q as I}from"./QInput.e321946b.js";import{Q as j}from"./QSpace.24353223.js";import{Q as q}from"./QForm.6c35817b.js";import{_ as z}from"./InputError.98d20f87.js";import{_ as S}from"./SecondaryButton.eb359184.js";import"./focus-manager.7caf06f8.js";import"./use-key-composition.93d4682b.js";import"./uid.42677368.js";const D=m("div",{class:"text-h6"},"Profile Information",-1),E=m("div",{class:"text-subtitle2"}," Update your account's profile information and email address. ",-1),L={key:0},M={class:"flex"},T={class:"q-gutter-md w-full"},ae={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const f=u,a=F({_method:"PUT",name:f.user.name,email:f.user.email,photo:null});d(null);const i=d(null),l=d(null),V=()=>{l.value&&(a.photo=l.value.files[0]),a.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>v()})},b=()=>{l.value.click()},N=()=>{const r=l.value.files[0];if(!r)return;const o=new FileReader;o.onload=s=>{i.value=s.target.result},o.readAsDataURL(r)},B=()=>{R.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{i.value=null,v()}})},v=()=>{var r;(r=l.value)!=null&&r.value&&(l.value.value=null)};return(r,o)=>(c(),g(q,{class:"mx-auto"},{default:t(()=>[e(U,{flat:"",bordered:""},{default:t(()=>[e(h,null,{default:t(()=>[D,E]),_:1}),e(Q),e(h,null,{default:t(()=>[r.$page.props.jetstream.managesProfilePhotos?(c(),A("div",L,[m("input",{ref_key:"photoInput",ref:l,type:"file",class:"hidden",onChange:N},null,544),m("div",M,[x(e(w,{size:"150px",class:"mx-auto"},{default:t(()=>[e(P,{src:u.user.profile_photo_url,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[k,!i.value]]),x(e(w,{size:"150px",class:"mx-auto"},{default:t(()=>[e(P,{src:i.value,alt:u.user.name},null,8,["src","alt"])]),_:1},512),[[k,i.value]])]),e(S,{class:"mt-2 mr-2",type:"button",onClick:y(b,["prevent"])},{default:t(()=>[p(" Select A New Photo ")]),_:1},8,["onClick"]),u.user.profile_photo_path?(c(),g(S,{key:0,type:"button",class:"mt-2",onClick:y(B,["prevent"])},{default:t(()=>[p(" Remove Photo ")]),_:1},8,["onClick"])):C("",!0),e(z,{message:n(a).errors.photo,class:"mt-2"},null,8,["message"])])):C("",!0)]),_:1}),e(_,null,{default:t(()=>[m("div",T,[e(I,{type:"text",modelValue:n(a).name,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).name=s),outlined:"",label:"Name"},null,8,["modelValue"]),e(I,{type:"text",modelValue:n(a).email,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).email=s),outlined:"",label:"Email"},null,8,["modelValue"])])]),_:1}),e(Q),e(_,null,{default:t(()=>[e(j),e($,{unelevated:"",color:"primary",onClick:o[2]||(o[2]=s=>V()),loading:n(a).processing},{default:t(()=>[p("Save")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}};export{ae as default};
